{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-4 mt-5">
            <!-- Displaying profile photo -->
            {% if user.profile_pic_path %}
            <img src="{{url_for('static',filename=user.profile_pic_path)}}" alt="profile" class="img-thumbnail"
                style="border-radius: 50%;" height="200px" width="200px">
            {% else %}
            <p>No profile picture</p>
            {% endif %}
            {% if user == current_user %}
            <form action="{{url_for('main.update_pic',uname=user.username)}}" method="post" class="mt-3"
                enctype="multipart/form-data">
                <input type="file" name="photo" class="form-control" required style="border: none;">
                <input type="submit" value="Update Image" class="btn">
            </form>
        </div>
        {% endif %}
        <div class="col-md-4 mt-5 ms-5">
            <!-- Displaying the username -->
            <h1 class="username">{{user.username | capitalize}}</h1>

            <!-- Displaying user bio -->
            {% if user.bio %}
            <h4>{{user.bio}}</h4>
            {% else %}
            <h4>{{user.username | capitalize}} has no bio.</h4>
            {% endif %}
            {% if user == current_user %}
            <a class="btn" href="{{url_for('main.update_profile',uname=user.username)}}">Edit
                profile</a>
            {% endif %}
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-md-12">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#favourite">Favourite Tracks</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#playlist">Playlists</a>
                </li>
            </ul>
        </div>
    </div>

    {%if current_user %}
    <div class="row mt-5">
        <table class="table" id="favourites">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Track</th>
                    <th scope="col">Preview</th>
                </tr>
            </thead>
            {% for track in tracks%}
            <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td>{{track.name}}</td>
                    <td>Otto</td>
                    <td>@mdo</td>
                </tr>
            </tbody>
            {% endfor %}
        </table>
    </div>
    {% endif %}
</div>
{% endblock %}